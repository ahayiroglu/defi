{"version":3,"sources":["webpack://defi/webpack/universalModuleDefinition","webpack://defi/webpack/bootstrap","webpack://defi/./src/_core/defs.js","webpack://defi/./src/_helpers/checkobjecttype.js","webpack://defi/./src/trigger/_triggerone.js","webpack://defi/./src/_helpers/defierror.js","webpack://defi/./src/off/_removelistener.js","webpack://defi/./src/_mq/index.js","webpack://defi/./src/set.js","webpack://defi/./src/_core/defineprop.js","webpack://defi/./src/_core/init.js","webpack://defi/./src/on/_addlistener.js","webpack://defi/./src/binders/input.js","webpack://defi/./src/unbindnode/index.js","webpack://defi/./src/off/_undelegatelistener.js","webpack://defi/./src/on/_delegatelistener/index.js","webpack://defi/./src/_mq/_data.js","webpack://defi/./src/_mq/_init.js","webpack://defi/./src/on/_domeventregexp.js","webpack://defi/./src/on/_splitbyspaceregexp.js","webpack://defi/./src/bindnode/_getnodes.js","webpack://defi/./src/bindnode/index.js","webpack://defi/./src/off/_removetreelistener.js","webpack://defi/./src/on/_addtreelistener.js","webpack://defi/./src/_helpers/debounce.js","webpack://defi/./src/_mq/_html2nodelist.js","webpack://defi/./src/_helpers/is.js","webpack://defi/./src/mediate.js","webpack://defi/./src/remove.js","webpack://defi/./src/bindoptionalnode.js","webpack://defi/./src/bound.js","webpack://defi/./src/bindnode/_createobjecthandler.js","webpack://defi/./src/bindnode/_createnodehandler.js","webpack://defi/./src/binders/output.js","webpack://defi/./src/binders/progress.js","webpack://defi/./src/binders/select.js","webpack://defi/./src/binders/textarea.js","webpack://defi/./src/defaultbinders.js","webpack://defi/./src/lookforbinder.js","webpack://defi/./src/bindnode/_bindsinglenode.js","webpack://defi/./src/unbindnode/_removebinding.js","webpack://defi/./src/bindnode/_createbindingswitcher.js","webpack://defi/./src/_helpers/toarray.js","webpack://defi/./src/bindnode/_selectnodes.js","webpack://defi/./src/_helpers/deepfind.js","webpack://defi/./src/calc/_createcalchandler.js","webpack://defi/./src/calc/_addsource.js","webpack://defi/./src/calc/index.js","webpack://defi/./src/trigger/_triggeronedomevent.js","webpack://defi/./src/trigger/_triggerdomevent.js","webpack://defi/./src/trigger/index.js","webpack://defi/./src/off/index.js","webpack://defi/./src/off/_removedomlistener.js","webpack://defi/./src/on/_delegatelistener/changehandler.js","webpack://defi/./src/on/_createdomeventhandler.js","webpack://defi/./src/_helpers/assign.js","webpack://defi/./src/_mq/add.js","webpack://defi/./src/_mq/off.js","webpack://defi/./src/_mq/on.js","webpack://defi/./src/_mq/parsehtml.js","webpack://defi/./src/on/_adddomlistener.js","webpack://defi/./src/on/index.js","webpack://defi/./src/_lib.js","webpack://defi/./src/index.js"],"names":["root","factory","exports","module","define","amd","defi","window","e","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","PseudoMap","obj","set","data","writable","has","WeakMap","method","typeofObject","defiError","triggerOne","triggerArgs","def","defs","events","length","Array","event","latestEvent","callback","ctx","apply","info","getTypeError","variable","variableName","expectedType","errors","common:object_type","_ref","binding:node_missing","_ref2","key","node","bindingErrorPrefix","binding:falsy_key","binding:instance_nodes_missing","_ref3","$nodes","calc:target_type","_ref4","target","calcErrorPrefix","calc:source_key_type","_ref5","sourceKey","calc:source_object_type","_ref6","sourceObject","calc:source_type","_ref7","source","trigger:names_type","_ref8","names","eventsErrorPrefix","on:names_type","_ref9","removedatakeys:key_type","_ref10","adddatakeys:key_type","_ref11","remove:key_type","_ref12","mediate:key_type","_ref13","getError","Error","context","allEvents","retain","noTrigger","domEventExecResult","domEventReg","exec","eventName","selector","removeDomListener","allEventsName","allEventsItem","_target2","_keys","keys","_i","_l2","_target","_index","_l","removeEventData","_target3","_index2","_l3","argCallback","_callback","eventCallback","push","a","mq","Init","parseHTML","assign","on","off","add","eventOptions","checkObjectType","objKey","objVal","props","propDef","newValue","previousValue","mediator","_eventOptions","skipMediator","fromMediator","force","forceHTML","silent","silentHTML","skipCalc","is","_keys2","_i2","_source","_key","isChanged","_result","self","extendedEventOptions","triggerChange","beforechangeEventName","beforechangeStr","beforechange","changeBindingsEventName","changeEventName","changeStr","change","changeDepsEventName","changeDelegatedKeyEventName","changeTreeEventName","changeCommonEventName","noAccessor","bindings","v","fromSetter","objectId","id","propModEventReg","arguments","initMK","_info$skipChecks","skipChecks","addDomListener","existingEvent","test","defineProp","replace","type","getValue","this","checked","setValue","unbindNode","itemKey","_l6","itemNode","itemEventOptions","mergedEventOptions","_key2","_source2","_key4","_result2","_source4","_keys4","_l5","_i4","keyObjKey","keyObjValue","_target4","_keys5","_i5","_l8","constructor","keyObjValueItem","_index3","_l7","deep","propsKey","_target5","_keys6","_i6","_l9","deepPath","split","deepPathLength","removeTreeListener","slice","_target6","_index4","_l10","binding","removeBinding","nodesItem","retainBindings","retainNodes","_target8","getNodes","_index6","_l12","_target7","_index5","_l11","undelegateListener","givenPath","path","pathStr","_end","_j","join","delegatedChangeEvtName","delegatedEventName","removeListener","delegatedData","addListener","changeHandler","nodeIndex","win","MQInit","result","nodeType","html2nodeList","newContext","querySelectorAll","document","htmlReg","customSelectorReg","selectNodes","$","nodes","u","bindNode","binder","temporaryOptionalFlag","optional","itemBinder","commonEventOptions","_key3","_source3","_keys3","_l4","_i3","_key5","_result3","_source5","_keys7","_i7","_source6","_key6","_result4","_eventOptions$optiona","_eventOptions$exactKe","exactKey","bindingSwitcher","createBindingSwitcher","addTreeListener","oneNode","bindSingleNode","handler","listenedPath","createTreeListener","restPath","newHandler","changeEvent","extendedChangeEvent","listenPath","delegateListener","func","givenDelay","thisArg","timeout","delay","args","callContext","clearTimeout","setTimeout","givenHTML","wrapMap","option","legend","thead","tr","td","col","area","_","html","createElement","optgroup","tbody","tfoot","colgroup","caption","th","ex","wrapper","innerHTML","children","childNodes","v1","v2","createMediator","mediate","givenKeys","isKeysArray","propMediator","givenKey","_loop","prefix","all","map","bindingOptions","onChangeValue","changedNode","evtBinder","nodeHandler","domEvent","disabled","which","ctrlKey","altKey","originalEvent","preventDefault","stopPropagation","fromNode","textContent","input","multiple","options","selected","givenValue","indexOf","tagName","textarea","select","progress","output","defaultBinders","spaceReg","givenBinder","getValueOnBind","setValueOnBind","_eventOptions$debounc","debounceSetValue","_eventOptions$debounc2","debounceGetValue","_eventOptions$debounc3","debounceSetValueOnBind","_eventOptions$debounc4","debounceGetValueOnBind","_eventOptions$debounc5","debounceSetValueDelay","_eventOptions$debounc6","debounceGetValueDelay","_eventOptions$useExac","useExactBinder","isUndefined","objectHandler","foundBinder","lookForBinder","_binder","initialize","syncNodeHandler","createNodeHandler","debouncedNodeHandler","debounce","evtName","addEventListener","syncObjectHandler","createObjectHandler","debouncedObjectHandler","destroy","removeEventListener","lastDeepPathItem","previousTarget","start","array","randomAttr","Math","random","toString","givenSelector","selectors","execResult","boundKey","subSelector","boundNodes","setAttribute","toArray","removeAttribute","paths","current","allSources","values","_changeEvent$protecto","protector","protectKey","promiseCalc","setEventOptions","isDelegated","deepFind","targetValue","Promise","resolve","then","promiseResult","catch","calcHandler","calc","sources","givenHandler","itemTarget","itemSource","itemHandler","_eventOptions$setOnIn","setOnInit","debounceCalcOnInit","debounceCalc","debounceCalcDelay","_eventOptions$isTarge","isTargetPropertyHidden","syncCalcHandler","createCalcHandler","debouncedCalcHandler","addSource","sourceKeyItem","_window","Event","createEvent","initEvent","bubbles","cancelable","matreshkaTriggerArgs","dispatchEvent","descendant","triggerOneDOMEvent","givenNames","_len","splitBySpaceReg","domEvtExecResult","triggerDomEvent","isNamesVarArray","namesObjName","namesObjCallback","propName","eventNamespace","delegatedEventParts","delegatedName","index","TypeError","nextKey","nextValue","idMap","b$","nodeID","splitByDotReg","namesStr","_names$i$split","namespace","j","k","delegate","splice","randomID","evt","scopeSelector","splittedSelector","matching","sel","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","exist","domEventHandler","createDomEventHandler","_createBindingHandler","fullEventName","bindHandler","unbindHandler","addBindListenerResult","addUnbindListenerResult","triggerOnInit","f","trigger","bound","bindOptionalNode","remove","functions"],"mappings":"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","file":"defi.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"defi\"] = factory();\n\telse\n\t\troot[\"defi\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 61);\n","function PseudoMap() {}\n\n// PseudoMap simulates WeakMap behavior with O(1) search complexity\n// it's needed to support @IE9 and @IE10\nnofn.assign(PseudoMap.prototype, {\n    get(obj) {\n        return obj.defi;\n    },\n    set(obj, data) {\n        Object.defineProperty(obj, 'defi', {\n            value: data,\n            enumerable: false,\n            writable: false,\n            configurable: false\n        });\n    },\n    has(obj) {\n        return 'defi' in obj;\n    }\n});\n\nexport default typeof WeakMap === 'undefined' ? new PseudoMap() : new WeakMap();\n","import defiError from './defierror';\n\n// checks type of a variable and throws an error if its type is not an object\nexport default function checkObjectType(object, method) {\n    const typeofObject = object === null ? 'null' : typeof object;\n\n    if (typeofObject !== 'object' && typeofObject !== 'function') {\n        throw defiError('common:object_type', {\n            object,\n            method\n        });\n    }\n}\n","import defs from '../_core/defs';\n\n// triggers one event\nexport default function triggerOne(object, name, triggerArgs) {\n    const def = defs.get(object);\n    const events = def && def.events[name];\n\n    if (events) {\n        const l = events.length;\n        let i = 0;\n\n        // allow to pass both array of args and single arg as triggerArgs\n        if (triggerArgs instanceof Array) {\n            while (i < l) {\n                const event = triggerOne.latestEvent = events[i];\n                const { callback, ctx } = event;\n                callback.apply(ctx, triggerArgs);\n                i += 1;\n            }\n        } else {\n            while (i < l) {\n                const event = triggerOne.latestEvent = events[i];\n                const { callback, ctx } = event;\n                callback.call(ctx, triggerArgs);\n                i += 1;\n            }\n        }\n    }\n}\n\n// latestEvent is used as required hack in somemethods\ntriggerOne.latestEvent = {\n    info: {},\n    name: null\n};\n","/* eslint-disable prefer-template, max-len */\nconst bindingErrorPrefix = 'Binding error:';\nconst calcErrorPrefix = 'Calc error:';\nconst eventsErrorPrefix = 'Events error:';\n\nconst getType = (variable) => {\n    if (variable === null) {\n        return 'null';\n    }\n\n    return typeof variable;\n};\nconst getTypeError = (variable, variableName, expectedType) =>\n    `${variableName} must have type \"${expectedType}\" but got \"${getType(variable)}\" instead.`;\n\nconst errors = {\n    'common:object_type': ({ object, method }) => `Error in ${method}: `\n        + getTypeError(object, 'object', 'object'),\n\n    'binding:node_missing': ({ key, node }) => {\n        const selectorInfo = typeof node === 'string' ? ` (given selector is \"${node}\")` : '';\n        return `${bindingErrorPrefix} node is missing for key \"${key}\"${selectorInfo}.`;\n    },\n    'binding:falsy_key': () => `${bindingErrorPrefix} \"key\" arg cannot be falsy`,\n    'binding:instance_nodes_missing': ({ $nodes }) => {\n        const missing = !$nodes ? '$nodes' : 'nodes';\n        return `${bindingErrorPrefix} \"${missing}\" property of Matreshka instance is missing.`\n            + ' It must be an object and must not be reassigned.';\n    },\n    'calc:target_type': ({ target }) =>\n        `${calcErrorPrefix} ${getTypeError(target, 'target key', 'string')}`,\n    'calc:source_key_type': ({ sourceKey }) =>\n        `${calcErrorPrefix} ${getTypeError(sourceKey, 'source key', 'string')}`,\n    'calc:source_object_type': ({ sourceObject }) =>\n        `${calcErrorPrefix} ${getTypeError(sourceObject, 'source object', 'object')}`,\n    'calc:source_type': ({ source }) =>\n        `${calcErrorPrefix} ${getTypeError(source, 'source', 'object')}`,\n\n    'trigger:names_type': ({ names }) =>\n        `${eventsErrorPrefix} ${getTypeError(names, 'event name', 'string')}`,\n\n    'on:names_type': ({ names }) => errors['trigger:names_type']({ names }),\n\n    'removedatakeys:key_type': ({ key }) =>\n        `Error in removeDataKeys: ${getTypeError(key, 'key', 'string')}`,\n\n    'adddatakeys:key_type': ({ key }) =>\n        `Error in addDataKeys: ${getTypeError(key, 'key', 'string')}`,\n\n    'remove:key_type': ({ key }) =>\n        `Error in remove: ${getTypeError(key, 'key', 'string')}`,\n\n    'mediate:key_type': ({ key }) =>\n        `Error in mediate: ${getTypeError(key, 'key', 'string')}`\n};\n\nexport default function defiError(key, data) {\n    const getError = errors[key];\n    if (!getError) {\n        throw Error(`Unknown error \"${key}\". Please report about this on Github.`);\n    }\n\n    return new Error(getError(data));\n}\n","import defs from '../_core/defs';\nimport triggerOne from '../trigger/_triggerone';\nimport domEventReg from '../on/_domeventregexp';\n\n// removes simple event listener from an object\nexport default function removeListener(object, name, callback, context, info) {\n    const def = defs.get(object);\n\n    // if no definition do nothing\n    if (!def) {\n        return false;\n    }\n\n    const { events: allEvents } = def;\n    const events = allEvents[name];\n    const retain = [];\n    const noTrigger = name ? name[0] === '_' : false;\n    const domEventExecResult = domEventReg.exec(name);\n\n    if (domEventExecResult) {\n        const [, eventName, key, selector] = domEventExecResult;\n        // fixing circular reference issue\n        const removeDomListener = require('./_removedomlistener');\n\n        removeDomListener(object, key, eventName, selector, callback, context, info);\n\n        return true;\n    }\n\n    // if all events need to be removed\n    if (typeof name === 'undefined') {\n        if (!noTrigger) {\n            nofn.forOwn(allEvents, (allEventsItem, allEventsName) => {\n                nofn.forEach(allEventsItem, (event) => {\n                    const removeEventData = {\n                        allEventsName,\n                        callback: event.callback,\n                        context: event.context\n                    };\n\n                    triggerOne(object, `removeevent:${name}`, removeEventData);\n                    triggerOne(object, 'removeevent', removeEventData);\n                });\n            });\n        }\n\n        // restore default value of \"events\"\n        def.events = {};\n    } else if (events) {\n        // if events with given name are found\n        nofn.forEach(events, (event) => {\n            const argCallback = (callback && callback._callback) || callback;\n            const eventCallback = event.callback._callback || event.callback;\n\n            if ((argCallback && argCallback !== eventCallback)\n                || (context && context !== event.context)) {\n                // keep event\n                retain.push(event);\n            } else {\n                const removeEventData = {\n                    name,\n                    callback: event.callback,\n                    context: event.context\n                };\n\n                if (!noTrigger) {\n                    triggerOne(object, `removeevent:${name}`, removeEventData);\n                    triggerOne(object, 'removeevent', removeEventData);\n                }\n            }\n        });\n\n        if (retain.length) {\n            allEvents[name] = retain;\n        } else {\n            delete def.events[name];\n        }\n    }\n\n    return false;\n}\n","import Init from './_init';\nimport parseHTML from './parsehtml';\nimport on from './on';\nimport off from './off';\nimport add from './add';\nimport assign from '../_helpers/assign';\n\n// tiny jQuery replacement for Matreshka\n// mq previously called balalaika.js\nexport default function mq(selector, context) {\n    return new Init(selector, context);\n}\n\nmq.parseHTML = parseHTML;\n\nassign(Init.prototype, {\n    on,\n    off,\n    add\n});\n","import defs from './_core/defs';\nimport triggerOne from './trigger/_triggerone';\nimport checkObjectType from './_helpers/checkobjecttype';\nimport is from './_helpers/is';\n\n// the function sets new value for a property\n// since its performance is very critical we're checking events existence manually\nexport default function set(object, key, value, eventOptions) {\n    // throw error when object type is wrong\n    checkObjectType(object, 'set');\n\n    // if no key or falsy key is given\n    if (!key) {\n        return object;\n    }\n\n    // allow to use key-value object as another method variation\n    if (typeof key === 'object') {\n        nofn.forOwn(key, (objVal, objKey) => set(object, objKey, objVal, value));\n        return object;\n    }\n\n    eventOptions = eventOptions || {}; // eslint-disable-line no-param-reassign\n    const def = defs.get(object);\n\n    // if no object definition then make simple assignment\n    if (!def) {\n        object[key] = value;\n        return object;\n    }\n\n    const { props, events } = def;\n    const propDef = props[key];\n\n    // if no property definition then make simple assignment\n    if (!propDef) {\n        object[key] = value;\n        return object;\n    }\n\n    const { value: previousValue, mediator } = propDef;\n\n    // possible flags, all of them are falsy by default\n    const {\n        skipMediator,\n        fromMediator,\n        force,\n        forceHTML,\n        silent,\n        silentHTML,\n        skipCalc\n    } = eventOptions;\n\n    let newValue;\n\n    if (mediator && !is(value, previousValue) && !skipMediator && !fromMediator) {\n        newValue = mediator(value);\n    } else {\n        newValue = value;\n    }\n\n    const isChanged = !is(newValue, previousValue);\n\n    // add to eventOptions object some useful properties\n    // we override default eventOptions because some of the properties need to have actual values,\n    // not inherited ones (eg when calc is used)\n    const extendedEventOptions = {\n        ...eventOptions,\n        value: newValue,\n        self: object,\n        previousValue,\n        key,\n        isChanged\n    };\n\n    const triggerChange = (isChanged || force) && !silent;\n\n    // trigger beforechange:KEY and beforechange events\n    if (triggerChange) {\n        const beforechangeStr = 'beforechange';\n        const beforechangeEventName = `${beforechangeStr}:${key}`;\n\n        if (events[beforechangeEventName]) {\n            triggerOne(object, beforechangeEventName, extendedEventOptions);\n        }\n\n        if (events[beforechangeStr]) {\n            triggerOne(object, beforechangeStr, extendedEventOptions);\n        }\n    }\n\n    propDef.value = newValue;\n\n    // triger bindings\n    if (!silentHTML && (isChanged || forceHTML)) {\n        const changeBindingsEventName = `_change:bindings:${key}`;\n        if (events[changeBindingsEventName]) {\n            triggerOne(object, changeBindingsEventName, extendedEventOptions);\n        }\n    }\n\n    // trigger change:KEY and change events\n    if (triggerChange) {\n        const changeStr = 'change';\n        const changeEventName = `${changeStr}:${key}`;\n        if (events[changeEventName]) {\n            triggerOne(object, changeEventName, extendedEventOptions);\n        }\n\n        if (events[changeStr]) {\n            triggerOne(object, changeStr, extendedEventOptions);\n        }\n    }\n\n    // trigger dependencies made by calc method\n    if ((isChanged || force) && !skipCalc) {\n        const changeDepsEventName = `_change:deps:${key}`;\n        if (events[changeDepsEventName]) {\n            triggerOne(object, changeDepsEventName, extendedEventOptions);\n        }\n    }\n\n\n    if (isChanged) {\n        // trigger common delegated events logic\n        const changeDelegatedKeyEventName = `_change:delegated:${key}`;\n        if (events[changeDelegatedKeyEventName]) {\n            triggerOne(object, changeDelegatedKeyEventName, extendedEventOptions);\n        }\n\n        // trigger tree change events logic\n        const changeTreeEventName = `_change:tree:${key}`;\n        if (events[changeTreeEventName]) {\n            triggerOne(object, changeTreeEventName, extendedEventOptions);\n        }\n\n        // trigger other internal change events\n        const changeCommonEventName = `_change:common:${key}`;\n        if (events[changeCommonEventName]) {\n            triggerOne(object, changeCommonEventName, extendedEventOptions);\n        }\n\n        // trigger delegated logic for asterisk events (*.*.*@foo)\n        // TODO: Confusing events names (\"_change:delegated\", \"_change:common:KEY\" etc)\n        const changeDelegatedEventName = '_change:delegated';\n        if (events[changeDelegatedEventName]) {\n            triggerOne(object, changeDelegatedEventName, extendedEventOptions);\n        }\n    }\n\n    return object;\n}\n","import defs from './defs';\nimport set from '../set';\n\n// the function defines needed descriptor for given property\nexport default function defineProp(object, key, noAccessor) {\n    const def = defs.get(object);\n\n    // if no object definition do nothing\n    if (!def) {\n        return null;\n    }\n\n    if (!def.props[key]) {\n        const propDef = def.props[key] = {\n            value: object[key],\n            mediator: null,\n            bindings: null\n        };\n\n        if (!noAccessor) {\n            Object.defineProperty(object, key, {\n                configurable: true,\n                enumerable: true,\n                get() {\n                    return propDef.value;\n                },\n                set(v) {\n                    return set(object, key, v, {\n                        fromSetter: true\n                    });\n                }\n            });\n        }\n    }\n\n    return def.props[key];\n}\n","import defs from './defs';\n\nlet objectId = 0;\n\n// this is common function which associates an object with its Matreshka definition\nexport default function initMK(object) {\n    let def = defs.get(object);\n    if (!def) {\n        def = {\n            // a property name of \"events\" object is an event name\n            // and a value is an array of event handlers\n            events: {\n                /* example: {\n                    callback: function,\n                    ctx: object,\n                    context: object2,\n                    name: \"example\",\n                    info: { ...extra data for an event... }\n                } */\n            },\n            // \"props\" contains special information about properties (getters, setters etc)\n            props: {\n                /* example: {\n                    value: object[key],\n                    mediator: null,\n                    bindings: [{\n                        node,\n                        binder,\n                        nodeHandler,\n                        objectHandler,\n                        ...other required info\n                    }]\n                } */\n            },\n            id: objectId\n        };\n\n        objectId += 1;\n\n        defs.set(object, def);\n    }\n\n    return def;\n}\n","import initMK from '../_core/init';\nimport triggerOne from '../trigger/_triggerone';\nimport defineProp from '../_core/defineprop';\nimport domEventReg from './_domeventregexp';\n\n// property modifier event regexp\nconst propModEventReg // eslint-disable-next-line max-len\n    = /^_change:deps:|^_change:bindings:|^_change:delegated:|^_change:common:|^_change:tree:|^change:|^beforechange:/;\n\n// adds simple event listener\n// used as core of event engine\nexport default function addListener(object, name, callback, context, info = {}) {\n    const { events: allEvents } = initMK(object);\n    const ctx = context || object;\n    const events = allEvents[name];\n    const event = {\n        callback, context, ctx, name, info\n    };\n    // skipChecks is used by internal methods for better performance\n    const { skipChecks = false } = info;\n\n    if (!skipChecks) {\n        const domEventExecResult = domEventReg.exec(name);\n\n        if (domEventExecResult) {\n            const [, eventName, key, selector] = domEventExecResult;\n            // fixing circular reference issue\n            const addDomListener = require('./_adddomlistener');\n\n            addDomListener(object, key, eventName, selector, callback, context, info);\n\n            return true;\n        }\n    }\n\n    // if there are events with the same name\n    if (events) {\n        if (!skipChecks) {\n            // if there are events with the same data, return false\n            for (let i = 0; i < events.length; i++) {\n                const existingEvent = events[i];\n                const argCallback = (callback && callback._callback) || callback;\n                const eventCallback = existingEvent.callback._callback || existingEvent.callback;\n                if (argCallback === eventCallback && existingEvent.context === context) {\n                    return false;\n                }\n            }\n        }\n\n        // if the event isn't found add it to the event list\n        events.push(event);\n    } else {\n        // if there are no events with the same name, create an array with only  one event\n        allEvents[name] = [event];\n    }\n\n    if (propModEventReg.test(name)) {\n        // define needed accessors for KEY\n        defineProp(object, name.replace(propModEventReg, ''));\n    }\n\n    // names prefixed by underscore mean \"private\" events\n    if (!skipChecks && name[0] !== '_') {\n        triggerOne(object, `addevent:${name}`, event);\n        triggerOne(object, 'addevent', event);\n    }\n\n    // if event is added successfully return true\n    return true;\n}\n","// returns a binder for input element based on its type\nexport default function input(type) {\n    let on;\n    switch (type) {\n        case 'checkbox':\n            return {\n                on: 'click keyup',\n                getValue() {\n                    return this.checked;\n                },\n                setValue(value) {\n                    this.checked = value;\n                }\n            };\n        case 'radio':\n            return {\n                on: 'click keyup',\n                getValue() {\n                    return this.value;\n                },\n                setValue(value) {\n                    this.checked = typeof value !== 'undefined' && this.value === value;\n                }\n            };\n        case 'submit':\n        case 'button':\n        case 'image':\n        case 'reset':\n            return {};\n        case 'hidden':\n            on = null;\n            break;\n        case 'file':\n            on = 'change';\n            break;\n\n            /*\n            case 'text':\n            case 'password':\n            case 'date':\n            case 'datetime':\n            case 'datetime-local':\n            case 'month':\n            case 'time':\n            case 'week':\n            case 'range':\n            case 'color':\n            case 'search':\n            case 'email':\n            case 'tel':\n            case 'url':\n            case 'file':\n            case 'number': */\n        default: // other future (HTML6+) inputs\n            on = 'input';\n    }\n\n    return {\n        on,\n        getValue() {\n            return this.value;\n        },\n        setValue(value) {\n            this.value = value;\n        }\n    };\n}\n","import checkObjectType from '../_helpers/checkobjecttype';\nimport defs from '../_core/defs';\nimport getNodes from '../bindnode/_getnodes';\nimport removeTreeListener from '../off/_removetreelistener';\nimport removeBinding from './_removebinding';\n\n// unbinds a node\nexport default function unbindNode(object, key, node, eventOptions) {\n    // throw error when object type is wrong\n    checkObjectType(object, 'unbindNode');\n\n    if (key instanceof Array) {\n        if (typeof key[0] === 'string') {\n            /*\n             * accept array of keys\n             * this.unbindNode(['a', 'b', 'c'], node)\n             */\n\n            nofn.forEach(key, itemKey => unbindNode(object, itemKey, node, eventOptions));\n        } else {\n            /*\n             * acept array of objects\n             * this.unbindNode([{ key, node, binder, event }], { silent: true });\n             */\n            nofn.forEach(key, ({\n                key: itemKey,\n                node: itemNode,\n                event: itemEventOptions\n            }) => {\n                const commonEventOptions = node;\n                const mergedEventOptions = {};\n\n                if (commonEventOptions) {\n                    // extend event object by \"global\" event\n                    nofn.assign(mergedEventOptions, commonEventOptions);\n                }\n\n                if (itemEventOptions) {\n                    // extend event object by \"local\" event (\"event\" key of an object)\n                    nofn.assign(mergedEventOptions, itemEventOptions);\n                }\n\n                unbindNode(object, itemKey, itemNode, mergedEventOptions);\n            });\n        }\n\n        return object;\n    }\n\n    if (key && typeof key === 'object') {\n        nofn.forOwn(key, (keyObjValue, keyObjKey) => {\n            if (keyObjValue.constructor === Object && 'node' in keyObjValue) {\n                // this.unbindNode({ key: { node: $(), binder } ) }, { silent: true });\n                unbindNode(object, keyObjKey, keyObjValue.node, node);\n            } else if (\n                keyObjValue.constructor === Array\n                && keyObjValue.length\n                && keyObjValue[0].constructor === Object\n                && 'node' in keyObjValue[0]\n            ) {\n                // this.unbindNode({ key: [{ node: $(), binder }] ) }, { silent: true });\n                nofn.forEach(keyObjValue, (keyObjValueItem) => {\n                    unbindNode(object, keyObjKey, keyObjValueItem.node, node);\n                });\n            } else {\n                // this.unbindNode({ key: $() }, { silent: true });\n                unbindNode(object, keyObjKey, keyObjValue, node);\n            }\n        });\n        return object;\n    }\n\n    eventOptions = eventOptions || {}; // eslint-disable-line no-param-reassign\n    const { deep } = eventOptions;\n    const def = defs.get(object);\n\n    if (!def) {\n        return object;\n    }\n\n    const { props } = def;\n\n    // allow to pass null or undefined as key\n    // if passed then remove bindings of all keys for given object\n    if (key === null || typeof key === 'undefined') {\n        nofn.forOwn(props, (propsItem, propsKey) => {\n            unbindNode(object, propsKey, null, eventOptions);\n        });\n\n        return object;\n    }\n\n    // remove delegated binding\n    if (deep !== false) {\n        const deepPath = key.split('.');\n        const deepPathLength = deepPath.length;\n\n        if (deepPathLength > 1) {\n            let target = object;\n\n            for (let i = 0; i < deepPathLength - 1; i++) {\n                // TODO: Do we need to throw an error when a target is falsy?\n                target = target[deepPath[i]];\n            }\n\n            // TODO: Potential bug! This may undelegate listener for all bindings with the same path\n            // ...(cannot reproduce)\n            removeTreeListener(object, deepPath.slice(0, deepPathLength - 2));\n\n            unbindNode(target, deepPath[deepPathLength - 1], node, eventOptions);\n\n            return object;\n        }\n    }\n\n    const propDef = props[key];\n\n    // when no propdef do nothing\n    if (!propDef) {\n        return object;\n    }\n\n    const { bindings } = propDef;\n\n    // if the property doesn't have any bindings do nothing\n    if (!bindings) {\n        return object;\n    }\n\n    // if no node is pased remove all bindings for given key\n    if (!node) {\n        nofn.forEach(bindings, (binding) => {\n            removeBinding({\n                object, key, eventOptions, binding\n            });\n        });\n\n        propDef.bindings = null;\n\n        return object;\n    }\n\n    const $nodes = getNodes(object, node);\n    const retainBindings = [];\n    const retainNodes = [];\n\n    // iterate over all bindngs and compare their node with given nodes\n    nofn.forEach($nodes, (nodesItem) => {\n        nofn.forEach(bindings, (binding) => {\n            if (binding.node === nodesItem) {\n                removeBinding({\n                    object, key, eventOptions, binding\n                });\n            } else {\n                retainBindings.push(binding);\n                retainNodes.push(nodesItem);\n            }\n        });\n    });\n\n    // update bindings object\n    if (retainBindings.length) {\n        propDef.bindings = retainBindings;\n    } else {\n        propDef.bindings = null;\n    }\n\n    return object;\n}\n","import defs from '../_core/defs';\nimport removeListener from './_removelistener';\n\n// the function removes internally used events such as _asterisk:add\nfunction detatchDelegatedLogic({\n    delegatedEventName,\n    pathStr,\n    allEvents\n}) {\n    const retain = [];\n    const events = allEvents[delegatedEventName];\n\n    nofn.forEach(events, (event) => {\n        // pathStr is assigned to info in delegateListener\n        if (event.info.pathStr !== pathStr) {\n            retain.push(event);\n        }\n    });\n\n    if (retain.length) {\n        allEvents[delegatedEventName] = retain;\n    } else {\n        delete allEvents[delegatedEventName];\n    }\n}\n\n// removes delegated event listener from an object by given path\nexport default function undelegateListener(object, givenPath, name, callback, context, info = {}) {\n    const def = defs.get(object);\n\n    // if no definition do nothing\n    if (!def) {\n        return;\n    }\n\n    const { events: allEvents } = def;\n\n    let path = typeof givenPath === 'string' && givenPath !== '' ? givenPath.split('.') : givenPath;\n\n    if (!path || !path.length) {\n        // if no path then remove listener\n        removeListener(object, name, callback, context, info);\n    } else {\n        // else do all magic\n        const key = path[0];\n        let pathStr;\n\n        if (path.length > 1) {\n            path = nofn.slice(path, 1);\n            pathStr = path.join('.');\n        } else {\n            path = [];\n            pathStr = path[0] || '';\n        }\n\n\n        const delegatedChangeEvtName = `_change:delegated:${key}`;\n        if (allEvents[delegatedChangeEvtName]) {\n            detatchDelegatedLogic({\n                delegatedEventName: delegatedChangeEvtName,\n                pathStr,\n                allEvents\n            });\n        }\n\n        if (typeof object[key] === 'object') {\n            undelegateListener(object[key], path, name, callback, context, info);\n        }\n    }\n}\n","import addListener from '../_addlistener';\nimport changeHandler from './changehandler';\n\n// adds delegated event listener to an object by given path\nexport default function delegateListener(object, givenPath, name, callback, context, info = {}) {\n    // if typeof path is string and path is not empty string then split it\n    let path = typeof givenPath === 'string' && givenPath !== '' ? givenPath.split('.') : givenPath;\n\n    if (!path || !path.length) {\n        // if no path then add simple listener\n        addListener(object, name, callback, context, info);\n    } else {\n        // else do all magic\n        const key = path[0];\n        let pathStr; // needed for undelegation\n\n        if (path.length > 1) {\n            path = nofn.slice(path, 1);\n            pathStr = path.join('.');\n        } else {\n            path = [];\n            pathStr = path[0] || '';\n        }\n\n        const delegatedData = {\n            path,\n            name,\n            callback,\n            context,\n            info,\n            object\n        };\n\n            // the event is triggered by \"set\"\n        addListener(object, `_change:delegated:${key}`, changeHandler, null, {\n            delegatedData,\n            pathStr\n        });\n\n        // call handler manually\n        changeHandler({\n            value: object[key]\n        }, delegatedData);\n    }\n}\n","// an object allows to share data between modules; it's needed because we use\n// simplified ES modules there and cannot import and share a number\nexport default {\n    nodeIndex: 0,\n    allEvents: {}\n};\n","import html2nodeList from './_html2nodelist';\n\nconst win = window;\n\n// function-constructor of mq library\n// accepts many kinds of arguments (selector, html, function)\nfunction MQInit(selector, context) {\n    let result;\n\n    if (selector) {\n        if (selector.nodeType || (typeof win === 'object' && selector === win)) {\n            result = [selector];\n        } else if (typeof selector === 'string') {\n            if (/</.test(selector)) {\n                result = html2nodeList(selector);\n            } else if (context) {\n                const newContext = (new MQInit(context))[0];\n\n                if (newContext) {\n                    result = newContext.querySelectorAll(selector);\n                }\n            } else {\n                result = win.document.querySelectorAll(selector);\n            }\n        } else if ('length' in selector) {\n            // if it's something array-like (eg NodeList)\n            result = selector;\n        } else {\n            // this is somethong another (eg Attr)\n            result = [selector];\n        }\n    }\n\n    const length = result && result.length;\n\n    if (length) {\n        for (let i = 0; i < length; i++) {\n            this.push(result[i]);\n        }\n    }\n}\n\nMQInit.prototype = [];\n\nexport default MQInit;\n","// the regexp allows to parse things like \"click::x(.y)\"\n// it's shared between few modules\nexport default /([^::]+)::([^()]+)?(?:\\((.*)\\))?/;\n","// allows to split by spaces not inclusing ones inside of brackers\nexport default /\\s+(?![^(]*\\))/g;\n","import selectNodes from './_selectnodes';\nimport $ from '../_mq';\n\nconst htmlReg = /</;\nconst customSelectorReg = /:bound\\(([^(]*)\\)/;\n\n// the function works just like DOM library accepting any kind of arg\n// (HTML string, Node, NodeList etc) bu allows to pass custom selector\n// eg :bound(KEY)\nexport default function getNodes(object, selector) {\n    let nodes;\n\n    if (\n        typeof selector === 'string'\n        && !htmlReg.test(selector)\n        && customSelectorReg.test(selector)\n    ) {\n        nodes = selectNodes(object, selector);\n    } else {\n        nodes = $(selector);\n    }\n\n    return nodes;\n}\n","import initMK from '../_core/init';\nimport defineProp from '../_core/defineprop';\nimport getNodes from './_getnodes';\nimport createBindingSwitcher from './_createbindingswitcher';\nimport bindSingleNode from './_bindsinglenode';\nimport checkObjectType from '../_helpers/checkobjecttype';\nimport defiError from '../_helpers/defierror';\nimport addTreeListener from '../on/_addtreelistener';\n\n// initializes binsing between a property of an object to HTML node\nexport default function bindNode(object, key, node, binder, eventOptions) {\n    // throw error when object type is wrong\n    checkObjectType(object, 'bindNode');\n\n    eventOptions = eventOptions || {}; // eslint-disable-line no-param-reassign\n    binder = binder || {}; // eslint-disable-line no-param-reassign\n\n    initMK(object);\n\n    const { temporaryOptionalFlag } = bindNode;\n\n    delete bindNode.temporaryOptionalFlag;\n\n    // throw an error when key is falsy\n    if (!key) {\n        throw defiError('binding:falsy_key');\n    }\n\n    if (key instanceof Array) {\n        if (typeof key[0] === 'string') {\n            /*\n             * accept array of keys\n             * this.bindNode(['a', 'b', 'c'], node)\n             */\n            if (temporaryOptionalFlag) {\n                // eslint-disable-next-line no-param-reassign\n                eventOptions = { ...eventOptions, optional: true };\n            }\n\n            nofn.forEach(key, itemKey => bindNode(object, itemKey, node, binder, eventOptions));\n        } else {\n            /*\n             * accept array of objects\n             * this.bindNode([{key, node, binder, event}], { silent: true });\n             */\n            nofn.forEach(key, ({\n                key: itemKey,\n                node: itemNode,\n                binder: itemBinder,\n                event: itemEventOptions\n            }) => {\n                const commonEventOptions = node;\n                const mergedEventOptions = {};\n\n                if (temporaryOptionalFlag) {\n                    mergedEventOptions.optional = true;\n                }\n\n                if (commonEventOptions) {\n                    // extend event object by \"global\" event\n                    nofn.assign(mergedEventOptions, commonEventOptions);\n                }\n\n                if (itemEventOptions) {\n                    // extend event object by \"local\" event (\"event\" key of an object)\n                    nofn.assign(mergedEventOptions, itemEventOptions);\n                }\n\n                bindNode(object, itemKey, itemNode, itemBinder, mergedEventOptions);\n            });\n        }\n\n        return object;\n    }\n\n\n    if (typeof key === 'object') {\n        nofn.forOwn(key, (keyObjValue, keyObjKey) => {\n            // binder means eventOptions\n            if (temporaryOptionalFlag) {\n                // eslint-disable-next-line no-param-reassign\n                eventOptions = binder ? { ...binder, optional: true } : { optional: true };\n            } else {\n                eventOptions = binder; // eslint-disable-line no-param-reassign\n            }\n\n            if (\n                keyObjValue\n                && keyObjValue.constructor === Object\n                && 'node' in keyObjValue\n            ) {\n                // this.bindNode({ key: { node: $(), binder } ) }, { on: 'evt' }, { silent: true });\n                bindNode(\n                    object, keyObjKey, keyObjValue.node,\n                    keyObjValue.binder || node, eventOptions\n                );\n            } else if (\n                keyObjValue\n                && keyObjValue.constructor === Array\n                && keyObjValue.length\n                && keyObjValue[0].constructor === Object\n                && 'node' in keyObjValue[0]\n            ) {\n                // this.bindNode({ key: [{\n                //   node: $(),\n                //   binder\n                // }] ) }, { on: 'evt' }, { silent: true });\n                nofn.forEach(keyObjValue, (keyObjValueItem) => {\n                    bindNode(\n                        object, keyObjKey, keyObjValueItem.node,\n                        keyObjValueItem.binder || node, eventOptions\n                    );\n                });\n            } else {\n                // this.bindNode({ key: $() }, { on: 'evt' }, { silent: true });\n                bindNode(object, keyObjKey, keyObjValue, node, eventOptions);\n            }\n        });\n\n        return object;\n    }\n\n    const {\n        optional = temporaryOptionalFlag || false, // check out bindOptionalNode\n        exactKey = false\n    } = eventOptions;\n    const $nodes = getNodes(object, node);\n\n    // check node existence\n    if (!$nodes.length) {\n        if (optional) {\n            return object;\n        }\n\n        throw defiError('binding:node_missing', { key, node });\n    }\n\n    if (!exactKey) {\n        const deepPath = key.split('.');\n        const deepPathLength = deepPath.length;\n\n        if (deepPathLength > 1) {\n            // handle binding when key arg includes dots (eg \"a.b.c.d\")\n            const bindingSwitcher = createBindingSwitcher({\n                object,\n                deepPath,\n                $nodes,\n                binder,\n                eventOptions,\n                bindNode\n            });\n\n            addTreeListener(object, deepPath.slice(0, deepPathLength - 1), bindingSwitcher);\n\n            bindingSwitcher();\n\n            return object;\n        }\n    }\n\n    const propDef = defineProp(object, key);\n\n    // handle binding for every node separately\n    nofn.forEach($nodes, oneNode => bindSingleNode(object, {\n        $nodes,\n        node: oneNode,\n        key,\n        eventOptions,\n        binder,\n        propDef\n    }));\n\n    return object;\n}\n","import undelegateListener from './_undelegatelistener';\n\n// removes tree listener from all object tree of fiven path\n// TODO: Pass context to removeTreeListener\nexport default function removeTreeListener(object, deepPath, handler) {\n    if (typeof deepPath === 'string') {\n        deepPath = deepPath.split('.'); // eslint-disable-line no-param-reassign\n    }\n\n    // iterate over keys of the path and undelegate given handler (can be undefined)\n    for (let i = 0; i < deepPath.length; i++) {\n        // TODO: Array.prototype.slice is slow\n        const listenedPath = deepPath.slice(0, i);\n\n        undelegateListener(\n            object,\n            listenedPath,\n            `_change:tree:${deepPath[i]}`,\n            handler\n        );\n    }\n}\n","import delegateListener from './_delegatelistener';\nimport removeTreeListener from '../off/_removetreelistener';\n\n// creates tree listener\nfunction createTreeListener({ handler, restPath }) {\n    const newHandler = function treeListener(changeEvent) {\n        const extendedChangeEvent = {\n            restPath,\n            ...changeEvent\n        };\n        const { previousValue, value } = changeEvent;\n\n        // removes listener for all branches of the path on old object\n        if (previousValue && typeof previousValue === 'object') {\n            removeTreeListener(previousValue, restPath, handler);\n        }\n\n        // adds listener for all branches of \"restPath\" path on newly assigned object\n        if (value && typeof value === 'object') {\n            addTreeListener(value, restPath, handler);\n        }\n\n        // call original handler\n        handler.call(this, extendedChangeEvent);\n    };\n\n    newHandler._callback = handler;\n\n    return newHandler;\n}\n\n// listens changes for all branches of given path\n// TODO: Pass context to addTreeListener\n// one of the most hard functions to understand\nexport default function addTreeListener(object, deepPath, handler) {\n    if (typeof deepPath === 'string') {\n        deepPath = deepPath.split('.'); // eslint-disable-line no-param-reassign\n    }\n\n    // iterate over all keys and delegate listener for all objects of given branch\n    for (let i = 0; i < deepPath.length; i++) {\n        // TODO: Array.prototype.slice method is slow\n        const listenPath = deepPath.slice(0, i);\n        const restPath = deepPath.slice(i + 1);\n\n        delegateListener(\n            object,\n            listenPath,\n            `_change:tree:${deepPath[i]}`,\n            createTreeListener({\n                handler,\n                restPath\n            })\n        );\n    }\n}\n","// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds.\n// (c) https://davidwalsh.name/javascript-debounce-function\n\nexport default function debounce(func, givenDelay, thisArg) {\n    let timeout;\n    let delay;\n    if (typeof givenDelay !== 'number') {\n        thisArg = givenDelay; // eslint-disable-line no-param-reassign\n        delay = 0;\n    } else {\n        delay = givenDelay || 0;\n    }\n\n    return function debounced() {\n        const args = arguments;\n        const callContext = thisArg || this;\n\n        clearTimeout(timeout);\n\n        timeout = setTimeout(() => func.apply(callContext, args), delay);\n    };\n}\n","// converts HTML string to NodeList instance\nexport default function html2nodeList(givenHTML) {\n    // wrapMap is taken from jQuery\n    const wrapMap = {\n        option: [1, '<select multiple=\"multiple\">', '</select>'],\n        legend: [1, '<fieldset>', '</fieldset>'],\n        thead: [1, '<table>', '</table>'],\n        tr: [2, '<table><tbody>', '</tbody></table>'],\n        td: [3, '<table><tbody><tr>', '</tr></tbody></table>'],\n        col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],\n        area: [1, '<map>', '</map>'],\n        _: [0, '', '']\n    };\n\n    const html = givenHTML.replace(/^\\s+|\\s+$/g, '');\n    let node = window.document.createElement('div');\n    let i;\n\n    wrapMap.optgroup = wrapMap.option;\n    wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\n    wrapMap.th = wrapMap.td;\n\n    const ex = /<([\\w:]+)/.exec(html);\n    const wrapper = (ex && wrapMap[ex[1]]) || wrapMap._;\n\n    node.innerHTML = wrapper[1] + html + wrapper[2];\n\n    i = wrapper[0];\n\n    while (i) {\n        i -= 1;\n        node = node.children[0];\n    }\n\n    return node.childNodes;\n}\n","// determines whether two values are the same value\n/* istanbul ignore next */\n// eslint-disable-next-line\nconst isPolyfill = (v1, v2) => v1 === 0 && v2 === 0 ? 1 / v1 === 1 / v2 : v1 !== v1 && v2 !== v2 || v1 === v2;\n\nexport default Object.is || isPolyfill;\n","import initMK from './_core/init';\nimport defineProp from './_core/defineprop';\nimport checkObjectType from './_helpers/checkobjecttype';\nimport set from './set';\nimport defiError from './_helpers/defierror';\n\n// creates property mediator\nfunction createMediator({\n    object,\n    propDef,\n    key,\n    mediator\n}) {\n    return function propMediator(value) {\n        // args: value, previousValue, key, object itself\n        return mediator.call(object, value, propDef.value, key, object);\n    };\n}\n\n// transforms property value on its changing\nexport default function mediate(object, givenKeys, mediator) {\n    // throw error when object type is wrong\n    checkObjectType(object, 'mediate');\n\n    const isKeysArray = givenKeys instanceof Array;\n\n    // allow to use key-mediator object as another method variation\n    if (typeof givenKeys === 'object' && !isKeysArray) {\n        nofn.forOwn(givenKeys, (objVal, objKey) => mediate(object, objKey, objVal));\n        return object;\n    }\n\n    initMK(object);\n\n    // allow to use both single key and an array of keys\n    const keys = isKeysArray ? givenKeys : [givenKeys];\n\n    nofn.forEach(keys, (key) => {\n        // if non-string is passed as a key\n        if (typeof key !== 'string') {\n            throw defiError('mediate:key_type', { key });\n        }\n\n        const propDef = defineProp(object, key);\n\n        const propMediator = propDef.mediator = createMediator({\n            object,\n            propDef,\n            key,\n            mediator\n        });\n\n        // set new value\n        set(object, key, propMediator(propDef.value), {\n            fromMediator: true\n        });\n    });\n\n    return object;\n}\n","import unbindNode from './unbindnode';\nimport triggerOne from './trigger/_triggerone';\nimport removeListener from './off/_removelistener';\nimport defs from './_core/defs';\nimport checkObjectType from './_helpers/checkobjecttype';\nimport defiError from './_helpers/defierror';\n\n// removes a property, its bindings and its events\n// TODO: remove function does not correctly removes delegated events, bindings, tree listeners etc\nexport default function remove(object, givenKey, eventOptions) {\n    // throw error when object type is wrong\n    checkObjectType(object, 'remove');\n\n    eventOptions = eventOptions || {}; // eslint-disable-line no-param-reassign\n    const def = defs.get(object);\n    const { silent } = eventOptions;\n    // allow to pass single key or an array of keys\n    const keys = givenKey instanceof Array ? givenKey : [givenKey];\n\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n\n        // if non-string is passed as a key\n        if (typeof key !== 'string') {\n            throw defiError('remove:key_type', { key });\n        }\n\n        const props = def && def.props;\n        const propDef = props && props[key];\n\n        // if no object definition then simply delete the property\n        if (!propDef) {\n            delete object[key];\n            continue;\n        }\n\n        const { value } = propDef;\n\n        // remove all bindings\n        unbindNode(object, key);\n\n        // TODO: Manual listing of event prefixes may cause problems in future\n        const removeEventPrefies = [\n            '_change:deps',\n            '_change:bindings',\n            '_change:delegated',\n            '_change:tree',\n            'change',\n            'beforechange',\n            'bind',\n            'unbind'\n        ];\n\n        // remove all events\n        nofn.forEach(removeEventPrefies, prefix => removeListener(object, `${prefix}:${key}`));\n\n        // delete property definition\n        delete props[key];\n\n        // delete the property itself\n        delete object[key];\n\n        const extendedEventOptions = {\n            key,\n            value,\n            ...eventOptions\n        };\n\n        // trigger delegated events logic removal for asterisk events (*.*.*@foo)\n        triggerOne(object, '_delete:delegated', extendedEventOptions);\n\n        // fire events if \"silent\" is not true\n        if (!silent) {\n            triggerOne(object, 'delete', extendedEventOptions);\n            triggerOne(object, `delete:${key}`, extendedEventOptions);\n        }\n    }\n}\n","import bindNode from './bindnode';\n\n// TODO: Adds a binding, not throwing an error when a node is missing\nexport default function bindOptionalNode() {\n    // this hack allows to keep bindOptionalNode as compact as possible\n    // and doesn't require to flip args and support all bindNode variations\n    bindNode.temporaryOptionalFlag = true;\n    return bindNode.apply(this, arguments);\n}\n","import defs from './_core/defs';\nimport checkObjectType from './_helpers/checkobjecttype';\n\n// the function returns bound node(s)\nexport default function bound(object, key, { all } = { all: false }) {\n    // throw error when object type is wrong\n    checkObjectType(object, 'bound');\n\n    // if no key or falsy key is given\n    if (!key) {\n        return object;\n    }\n\n    const def = defs.get(object);\n    const propDef = def.props[key];\n\n    let nodes;\n\n    if (propDef) {\n        const { bindings } = propDef;\n        nodes = (bindings && bindings.map(({ node }) => node)) || [];\n    } else {\n        nodes = [];\n    }\n\n    return all ? nodes : nodes[0] || null;\n}\n","// returns a function which is called when property value is changed\nexport default function createObjectHandler({\n    node,\n    propDef,\n    binder,\n    bindingOptions\n}) {\n    return function objectHandler(eventOptions = {}) {\n        const { value } = propDef;\n        const { onChangeValue, changedNode, binder: evtBinder } = eventOptions;\n        const { setValue } = binder;\n        // dirty hack for https://github.com/matreshkajs/matreshka/issues/19\n        const dirtyHackValue = onChangeValue === 'string' && typeof value === 'number'\n            ? `${value}` : value;\n\n        // don't call setValue if a property is changed via getValue of the same binder\n        if (changedNode === node && onChangeValue === dirtyHackValue && evtBinder === binder) {\n            return;\n        }\n\n        setValue.call(node, value, {\n            value,\n            ...bindingOptions\n        });\n    };\n}\n","import is from '../_helpers/is';\nimport set from '../set';\n\n// returns a function which called when bound node state is changed (eg DOM event is fired)\nexport default function createNodeHandler({\n    object,\n    key,\n    node,\n    propDef,\n    binder,\n    bindingOptions\n}) {\n    return function nodeHandler(domEvent = {}) {\n        // nodeHandler.disabled = true is set in unbindNode\n        // we cannot \"turn off\" binder.on when its value is a function\n        // developer needs to clean memory (\"turn off\" callback) manualy in binder.destroy\n        if (nodeHandler.disabled) {\n            return;\n        }\n\n        const previousValue = propDef.value;\n        const {\n            which, target, ctrlKey, altKey\n        } = domEvent;\n        const { getValue } = binder;\n        const value = getValue.call(node, {\n            previousValue,\n            domEvent,\n            originalEvent: domEvent.originalEvent || domEvent, // jQuery thing\n            // will throw \"preventDefault is not a function\" when domEvent is empty object\n            preventDefault: () => domEvent.preventDefault(),\n            // will throw \"stopPropagation is not a function\" when domEvent is empty object\n            stopPropagation: () => domEvent.stopPropagation(),\n            which,\n            target,\n            ctrlKey,\n            altKey,\n            ...bindingOptions\n        });\n\n        if (!is(value, previousValue)) {\n            set(object, key, value, {\n                fromNode: true,\n                // the following properties are needed to avoid circular changes\n                // they are used at objectHandler\n                changedNode: node,\n                onChangeValue: value,\n                binder\n            });\n        }\n    };\n}\n","// returns a binder for output element\nexport default function output() {\n    return {\n        on: null,\n        getValue() {\n            return this.value || this.textContent;\n        },\n        setValue(value) {\n            const property = 'form' in this ? 'value' : 'textContent';\n            this[property] = value === null ? '' : `${value}`;\n        }\n    };\n}\n","import input from './input';\n\n// returns a binder for textarea element\nexport default function progress() {\n    return input();\n}\n","// returns a binder for select element\nexport default function select(multiple) {\n    if (multiple) {\n        return {\n            on: 'change',\n            getValue() {\n                const { options } = this;\n                const result = [];\n\n                for (let i = 0; options.length > i; i++) {\n                    if (options[i].selected) {\n                        result.push(options[i].value);\n                    }\n                }\n\n                return result;\n            },\n            setValue(givenValue) {\n                const { options } = this;\n                const value = typeof givenValue === 'string' ? [givenValue] : givenValue;\n                for (let i = options.length - 1; i >= 0; i--) {\n                    options[i].selected = ~value.indexOf(options[i].value);\n                }\n            }\n        };\n    }\n\n    return {\n        on: 'change',\n        getValue() {\n            return this.value;\n        },\n        setValue(value) {\n            this.value = value;\n\n            if (!value) {\n                const { options } = this;\n                for (let i = options.length - 1; i >= 0; i--) {\n                    if (!options[i].value) {\n                        options[i].selected = true;\n                        break;\n                    }\n                }\n            }\n        }\n    };\n}\n","import input from './input';\n\n// returns a binder for textarea element\nexport default function textarea() {\n    // textarea behaves just like text input\n    return input('text');\n}\n","import input from './binders/input';\nimport textarea from './binders/textarea';\nimport select from './binders/select';\nimport progress from './binders/progress';\nimport output from './binders/output';\n\n// defaultBinders collection by default contains only one function-checker\nexport default [(node) => {\n    switch (node.tagName) {\n        case 'INPUT':\n            return input(node.type);\n        case 'TEXTAREA':\n            return textarea();\n        case 'SELECT':\n            return select(node.multiple);\n        case 'PROGRESS':\n            return progress();\n        case 'OUTPUT':\n            return output();\n        default:\n            return null;\n    }\n}];\n","import defaultBinders from './defaultbinders';\n\n// tries to find a binder for given node\nexport default function lookForBinder(node) {\n    for (let i = 0; i < defaultBinders.length; i++) {\n        const binder = defaultBinders[i].call(node, node);\n        if (binder) {\n            return binder;\n        }\n    }\n\n    return undefined;\n}\n","import lookForBinder from '../lookforbinder';\nimport createNodeHandler from './_createnodehandler';\nimport createObjectHandler from './_createobjecthandler';\nimport triggerOne from '../trigger/_triggerone';\nimport addListener from '../on/_addlistener';\nimport debounce from '../_helpers/debounce';\n\nconst spaceReg = /\\s+/;\n\n// handles binding for single property & node\n// the function is used at bindNode\nexport default function bindSingleNode(object, {\n    binder: givenBinder,\n    key,\n    $nodes,\n    node,\n    eventOptions,\n    propDef\n}) {\n    const {\n        silent,\n        getValueOnBind,\n        setValueOnBind,\n        // TODO: We probably need some general flag to cancel or force debouncing\n        // ... which overrides the following flags (something like debounceBinding)\n        debounceSetValue = true,\n        debounceGetValue = true,\n        debounceSetValueOnBind = false,\n        debounceGetValueOnBind = false,\n        debounceSetValueDelay = 0,\n        debounceGetValueDelay = 0,\n        useExactBinder = false\n    } = eventOptions;\n    // create bindings array in property definition object\n    const bindings = propDef.bindings = propDef.bindings || [];\n    const { value } = propDef;\n    const bindingOptions = {\n        self: object,\n        key,\n        value,\n        $nodes,\n        node\n    };\n    let isUndefined = typeof value === 'undefined';\n    let binder;\n    let objectHandler;\n    let nodeHandler;\n\n    // get actual binder\n    if (givenBinder !== null) {\n        // by default binder passed to bindNode is extended by default binder\n        // useExactBinder turns this behavior off\n        if (useExactBinder) {\n            binder = givenBinder;\n        } else {\n            // getting default binder\n            const foundBinder = lookForBinder(node);\n\n            // if default binder is found\n            if (foundBinder) {\n                // extend found binder by given binder\n                if (givenBinder) {\n                    nofn.assign(foundBinder, givenBinder);\n                }\n\n                binder = foundBinder;\n            } else {\n                // default binder is not found\n                binder = givenBinder || {};\n            }\n        }\n    }\n\n    const {\n        getValue, setValue, on, initialize\n    } = binder;\n\n    // call binder.initialize\n    if (initialize) {\n        initialize.call(node, bindingOptions);\n    }\n\n    // add needed event handlers to given node when getValue is given\n    if (getValue) {\n        const syncNodeHandler = createNodeHandler({\n            object,\n            key,\n            node,\n            propDef,\n            binder,\n            bindingOptions\n        });\n\n        let debouncedNodeHandler;\n\n        if (debounceGetValue || debounceGetValueOnBind) {\n            debouncedNodeHandler = debounce(syncNodeHandler, debounceGetValueDelay);\n        }\n\n        if (debounceGetValue) {\n            nodeHandler = debouncedNodeHandler;\n        } else {\n            nodeHandler = syncNodeHandler;\n        }\n\n        // TODO: Throw error when \"on\" and maybe other binder properties has wrong type\n        if (typeof on === 'function') {\n            on.call(node, nodeHandler, bindingOptions);\n        } else if (typeof on === 'string') {\n            // addEventListener is faster than \"on\" method from any DOM library\n            nofn.forEach(\n                on.split(spaceReg),\n                evtName => node.addEventListener(evtName, nodeHandler)\n            );\n        }\n\n        if ((isUndefined && getValueOnBind !== false) || getValueOnBind === true) {\n            if (debounceGetValueOnBind) {\n                debouncedNodeHandler();\n            } else {\n                syncNodeHandler();\n            }\n        }\n\n        isUndefined = typeof propDef.value === 'undefined';\n    }\n\n    // add needed event handlers to the object when setValue is given\n    if (setValue) {\n        const syncObjectHandler = createObjectHandler({\n            node,\n            propDef,\n            binder,\n            bindingOptions,\n            eventOptions\n        });\n\n        let debouncedObjectHandler;\n\n        if (debounceSetValue || debounceSetValueOnBind) {\n            debouncedObjectHandler = debounce(syncObjectHandler, debounceSetValueDelay);\n        }\n\n        if (debounceSetValue) {\n            objectHandler = debouncedObjectHandler;\n        } else {\n            objectHandler = syncObjectHandler;\n        }\n\n        // TODO: Is it possible to get previous value of a property?\n        addListener(object, `_change:bindings:${key}`, objectHandler, null, { skipChecks: true });\n\n        if ((!isUndefined && setValueOnBind !== false) || setValueOnBind === true) {\n            if (debounceSetValueOnBind) {\n                debouncedObjectHandler();\n            } else {\n                syncObjectHandler();\n            }\n        }\n    }\n\n    // add binding data to bindings array\n    bindings.push({\n        on,\n        node,\n        binder,\n        objectHandler,\n        nodeHandler,\n        bindingOptions\n    });\n\n    // fire events\n    if (!silent) {\n        const extendedEventOptions = {\n            key,\n            node,\n            ...eventOptions\n        };\n\n        triggerOne(object, `bind:${key}`, extendedEventOptions);\n        triggerOne(object, 'bind', extendedEventOptions);\n    }\n}\n","import removeListener from '../off/_removelistener';\nimport triggerOne from '../trigger/_triggerone';\n\nconst spaceReg = /\\s+/;\n\n// the function removes single binding for single object\n// called by unbindNode\nexport default function removeBinding({\n    object,\n    key,\n    eventOptions,\n    binding\n}) {\n    const {\n        bindingOptions,\n        binder,\n        node,\n        nodeHandler,\n        objectHandler\n    } = binding;\n    const { destroy, on } = binder;\n    const { silent } = eventOptions;\n\n    // if \"on\" is a function then disable it\n    // we cannot \"turn off\" custom listener defined by a programmer\n    // programmer needs to remove custom listener maually inside binder.destroy\n    if (typeof on === 'function') {\n        nodeHandler.disabled = true;\n    } else if (typeof on === 'string') {\n        // remove DOM event listener\n        // removeEventListener is faster than \"on\" method from any DOM library\n        nofn.forEach(\n            on.split(spaceReg),\n            evtName => node.removeEventListener(evtName, nodeHandler)\n        );\n    }\n\n    // remove object event listener\n    removeListener(object, `_change:bindings:${key}`, objectHandler);\n\n    // if binder.destroy is given call it\n    if (destroy) {\n        destroy.call(node, bindingOptions);\n    }\n\n    // fire events\n    if (!silent) {\n        const extendedEventOptions = {\n            key,\n            node,\n            ...eventOptions\n        };\n\n        triggerOne(object, `unbind:${key}`, extendedEventOptions);\n        triggerOne(object, 'unbind', extendedEventOptions);\n    }\n}\n","import unbindNode from '../unbindnode';\n\n// returns a function which re-adds binding when object branch is changed\n// the function is called by bindNode when something like\n// 'foo.bar.baz' is passed to it as key argument value\n// this is one of the hardest things in the framework to understand\nexport default function createBindingSwitcher({\n    object,\n    deepPath,\n    $nodes,\n    binder,\n    eventOptions,\n    bindNode\n}) {\n    return function bindingSwitcher(changeEvent = {}) {\n        const deepPathLength = deepPath.length;\n        const lastDeepPathItem = deepPath[deepPathLength - 1];\n        const {\n            value, // new value of a branch\n            previousValue, // previous value of a branch\n            restPath // path starting currently changed branch (passed by addTreeListener)\n        } = changeEvent;\n        let target; // an object to call bindNode\n        let previousTarget; // an object to call unbindNode\n\n\n        if (value && typeof value === 'object' && restPath) {\n            // if rest path is given and new value is an object\n            target = value;\n            for (let i = 0; i < restPath.length; i++) {\n                target = target[restPath[i]];\n                if (!target) {\n                    break;\n                }\n            }\n        } else {\n            // if rest path is not given\n            target = object;\n            for (let i = 0; i < deepPathLength - 1; i++) {\n                target = target[deepPath[i]];\n                if (!target) {\n                    break;\n                }\n            }\n        }\n\n        // if rest path is given and previous value is an object\n        if (previousValue && typeof previousValue === 'object' && restPath) {\n            previousTarget = previousValue;\n            for (let i = 0; i < restPath.length; i++) {\n                previousTarget = previousTarget[restPath[i]];\n                if (!previousTarget) {\n                    break;\n                }\n            }\n        }\n\n        // add binding for new target\n        if (target && typeof target === 'object') {\n            bindNode(target, lastDeepPathItem, $nodes, binder, eventOptions);\n        }\n\n        // remove binding for previously used object\n        if (previousTarget && typeof previousTarget === 'object') {\n            unbindNode(previousTarget, lastDeepPathItem, $nodes);\n        }\n    };\n}\n","// cheap conversion of an array-like object to Array instance\nexport default function toArray(object, start = 0) {\n    const { length } = object;\n    const array = Array(length);\n\n    for (let i = start; i < length; i++) {\n        array[i - start] = object[i];\n    }\n\n    return array;\n}\n","import defs from '../_core/defs';\nimport toArray from '../_helpers/toarray';\nimport $ from '../_mq';\n\nconst customSelectorReg = /\\s*:bound\\(([^(]*)\\)\\s*([\\S\\s]*)\\s*/;\nconst randomAttr = `${Math.random().toString().replace('0.', 'x')}y`; // x12345y\n\n// the function selects nodes based on a selector (including custom values, eg :bound)\n// TODO: selectNodes looks not good, it needs to be refactored and accelerated if possible\nexport default function selectNodes(object, givenSelector) {\n    const { props } = defs.get(object);\n    const selectors = givenSelector.split(',');\n    let result = $();\n\n    nofn.forEach(selectors, (selector) => {\n        const execResult = customSelectorReg.exec(selector);\n        if (execResult) {\n            const boundKey = execResult[1];\n            const subSelector = execResult[2];\n            const propDef = props[boundKey];\n\n            if (propDef) {\n                const { bindings } = propDef;\n                if (bindings) {\n                    const boundNodes = Array(bindings.length);\n                    nofn.forEach(bindings, (binding, i) => {\n                        boundNodes[i] = binding.node;\n                    });\n\n                    // if native selector passed after :bound(KEY) is not empty string\n                    // for example \":bound(KEY) .my-selector\"\n                    if (subSelector) {\n                        // if native selector contains children selector\n                        // for example \":bound(KEY) > .my-selector\"\n                        if (subSelector.indexOf('>') === 0) {\n                            // selecting children\n                            nofn.forEach(boundNodes, (node) => {\n                                node.setAttribute(randomAttr, randomAttr);\n                                const selected = node.querySelectorAll(`[${randomAttr}=\"${randomAttr}\"] ${subSelector}`);\n                                result = result.add(toArray(selected));\n                                node.removeAttribute(randomAttr);\n                            });\n                        } else {\n                            // if native selector doesn't contain children selector\n                            nofn.forEach(boundNodes, (node) => {\n                                const selected = node.querySelectorAll(subSelector);\n                                result = result.add(toArray(selected));\n                            });\n                        }\n                    } else {\n                        // if native selector is empty string just add bound nodes to result\n                        result = result.add(boundNodes);\n                    }\n                }\n            }\n        } else {\n            // if it's native selector (no custom things)\n            result = result.add(selector);\n        }\n    });\n\n    return result;\n}\n","// gets value of a property in nested object\n// eg \"d\" from a.b.c.d\nexport default function deepFind(obj, givenPath) {\n    const paths = typeof givenPath === 'string' ? givenPath.split('.') : givenPath;\n    let current = obj;\n\n    for (let i = 0; i < paths.length; ++i) {\n        if (typeof current[paths[i]] === 'undefined') {\n            return undefined;\n        }\n\n        current = current[paths[i]];\n    }\n\n    return current;\n}\n","import set from '../set';\nimport deepFind from '../_helpers/deepfind';\n\n// creates event handler for target object which will be fired when a source is changed\nexport default function createCalcHandler({\n    object,\n    eventOptions,\n    allSources,\n    target,\n    def,\n    handler\n}) {\n    return function calcHandler(changeEvent = {}) {\n        const values = [];\n        const { protector = {} } = changeEvent;\n        const protectKey = target + def.id;\n        const { promiseCalc } = eventOptions;\n        const setEventOptions = {\n            protector,\n            ...eventOptions,\n            ...changeEvent\n        };\n\n        if (protectKey in protector) {\n            return;\n        }\n\n        protector[protectKey] = true;\n\n        nofn.forEach(allSources, ({\n            sourceObject,\n            sourceKey,\n            isDelegated\n        }) => {\n            const value = isDelegated ? deepFind(sourceObject, sourceKey) : sourceObject[sourceKey];\n            values.push(value);\n        });\n\n        let targetValue = handler.apply(object, values);\n\n        if (promiseCalc) {\n            if (!(targetValue instanceof Promise)) {\n                targetValue = Promise.resolve(targetValue);\n            }\n\n            targetValue\n                .then(promiseResult => set(object, target, promiseResult, setEventOptions))\n                .catch((e) => {\n                    throw Error(e);\n                });\n        } else {\n            set(object, target, targetValue, setEventOptions);\n        }\n    };\n}\n","import addListener from '../on/_addlistener';\nimport addTreeListener from '../on/_addtreelistener';\nimport defiError from '../_helpers/defierror';\n\n// adds a source to a source list and adds needed event listener to a it\nexport default function addSource({\n    calcHandler,\n    allSources,\n    sourceKey,\n    sourceObject,\n    eventOptions\n}) {\n    let { exactKey = false } = eventOptions;\n    let isDelegated = false;\n\n    // source key must be a string\n    if (typeof sourceKey !== 'string') {\n        throw defiError('calc:source_key_type', { sourceKey });\n    }\n\n    // source object must be an object\n    if (!sourceObject || typeof sourceObject !== 'object') {\n        throw defiError('calc:source_object_type', { sourceObject });\n    }\n\n    if (!exactKey) {\n        const deepPath = sourceKey.split('.');\n\n        // if something like a.b.c is used as a key\n        if (deepPath.length > 1) {\n            isDelegated = true;\n            // TODO: Avoid collisions with bindings by using another event name\n            // ... instead of _change:tree:xxx\n            addTreeListener(sourceObject, deepPath, calcHandler);\n        } else {\n            exactKey = true;\n        }\n    }\n\n\n    if (exactKey) {\n        // normal handler\n        addListener(sourceObject, `_change:deps:${sourceKey}`, calcHandler);\n    }\n\n    allSources.push({\n        sourceKey,\n        sourceObject,\n        isDelegated\n    });\n}\n","import initMK from '../_core/init';\nimport checkObjectType from '../_helpers/checkobjecttype';\nimport defiError from '../_helpers/defierror';\nimport debounce from '../_helpers/debounce';\nimport addSource from './_addsource';\nimport createCalcHandler from './_createcalchandler';\nimport defineProp from '../_core/defineprop';\n\n// defines a property which is dependend on other properties\nexport default function calc(object, target, sources, givenHandler, eventOptions) {\n    // throw error when object type is wrong\n    checkObjectType(object, 'calc');\n\n    if (target instanceof Object) {\n        /*\n         * accept an object\n         * this.calc({target: { source, handler, event } }, commonEventOptions);\n         */\n        nofn.forOwn(target, ({\n            source: itemSource,\n            handler: itemHandler,\n            event: itemEventOptions\n        }, itemTarget) => {\n            const commonEventOptions = sources;\n            const mergedEventOptions = {};\n\n            if (commonEventOptions) {\n                // extend event object by \"global\" event\n                nofn.assign(mergedEventOptions, commonEventOptions);\n            }\n\n            if (itemEventOptions) {\n                // extend event object by \"local\" event (\"event\" key of an object)\n                nofn.assign(mergedEventOptions, itemEventOptions);\n            }\n\n            calc(object, itemTarget, itemSource, itemHandler, mergedEventOptions);\n        });\n\n        return object;\n    }\n\n    if (typeof target !== 'string') {\n        throw defiError('calc:target_type', { target });\n    }\n\n    eventOptions = eventOptions || {}; // eslint-disable-line no-param-reassign\n    const def = initMK(object);\n    const {\n        setOnInit = true,\n        debounceCalcOnInit = false,\n        debounceCalc = true,\n        debounceCalcDelay = 0,\n        // the next option is used to hide a property for internal use (eg in bindings parser)\n        // hidden property means no accessors\n        isTargetPropertyHidden = false\n    } = eventOptions;\n    const defaultHandler = value => value;\n    const handler = givenHandler || defaultHandler;\n    const allSources = [];\n    const syncCalcHandler = createCalcHandler({\n        object,\n        eventOptions,\n        allSources,\n        target,\n        def,\n        handler\n    });\n\n    let debouncedCalcHandler;\n    let calcHandler;\n\n    if (debounceCalcOnInit || debounceCalc) {\n        debouncedCalcHandler = debounce(syncCalcHandler, debounceCalcDelay);\n    }\n\n    defineProp(object, target, isTargetPropertyHidden);\n\n    if (!(sources instanceof Array)) {\n        sources = [sources]; // eslint-disable-line no-param-reassign\n    }\n\n    if (debounceCalc) {\n        calcHandler = debouncedCalcHandler;\n    } else {\n        calcHandler = syncCalcHandler;\n    }\n\n    nofn.forEach(sources, (source) => {\n        if (typeof source === 'string') {\n            // source object is current object\n            addSource({\n                calcHandler,\n                allSources,\n                sourceKey: source,\n                sourceObject: object,\n                eventOptions\n            });\n        } else {\n            // source object is external object\n            if (!source || typeof source !== 'object') {\n                throw defiError('calc:source_type', { source });\n            }\n\n            const sourceKey = source.key;\n            const sourceObject = source.object;\n            if (sourceKey instanceof Array) {\n                // many keys are passed\n                nofn.forEach(sourceKey, (sourceKeyItem) => {\n                    addSource({\n                        calcHandler,\n                        allSources,\n                        sourceKey: sourceKeyItem,\n                        sourceObject,\n                        eventOptions\n                    });\n                });\n            } else {\n                // one key is passed\n                addSource({\n                    calcHandler,\n                    allSources,\n                    sourceKey,\n                    sourceObject,\n                    eventOptions\n                });\n            }\n        }\n    });\n\n    if (setOnInit) {\n        if (debounceCalcOnInit) {\n            debouncedCalcHandler();\n        } else {\n            syncCalcHandler();\n        }\n    }\n\n    return object;\n}\n","// triggers given DOM event on given node\nexport default function triggerOneDOMEvent({\n    node,\n    eventName,\n    triggerArgs\n}) {\n    const { document, Event } = window;\n    let event;\n\n    // polyfill for older browsers\n    if (document.createEvent) {\n        /* istanbul ignore next */\n        event = document.createEvent('Event');\n        event.initEvent(eventName, true, true);\n    } else if (typeof Event !== 'undefined') {\n        event = new Event(eventName, {\n            bubbles: true,\n            cancelable: true\n        });\n    }\n\n    // matreshkaTriggerArgs will be used in a handler created by addDOMListener\n    event.matreshkaTriggerArgs = triggerArgs;\n\n    node.dispatchEvent(event);\n}\n","import triggerOneDOMEvent from './_triggeronedomevent';\nimport defs from '../_core/defs';\n\n// triggers DOM event on bound nodes\nexport default function triggerDOMEvent(object, key, eventName, selector, triggerArgs) {\n    const def = defs.get(object);\n\n    if (!def) {\n        return;\n    }\n\n    const { props } = def;\n    const propDef = props[key];\n\n    if (!propDef) {\n        return;\n    }\n\n    const { bindings } = propDef;\n\n    if (!bindings) {\n        return;\n    }\n\n    nofn.forEach(bindings, ({ node }) => {\n        if (selector) {\n            // if selector is given trigger an event on all node descendants\n            const descendants = node.querySelectorAll(selector);\n            nofn.forEach(descendants, (descendant) => {\n                triggerOneDOMEvent({\n                    node: descendant,\n                    eventName,\n                    triggerArgs\n                });\n            });\n        } else {\n            // trigger an event for single node\n            triggerOneDOMEvent({\n                node,\n                eventName,\n                triggerArgs\n            });\n        }\n    });\n}\n","import domEventReg from '../on/_domeventregexp';\nimport checkObjectType from '../_helpers/checkobjecttype';\nimport defiError from '../_helpers/defierror';\nimport splitBySpaceReg from '../on/_splitbyspaceregexp';\nimport defs from '../_core/defs';\nimport triggerOne from './_triggerone';\nimport triggerDomEvent from './_triggerdomevent';\n\n// triggers an event\nexport default function trigger(object, givenNames, ...triggerArgs) {\n    // throw error when object type is wrong\n    checkObjectType(object, 'trigger');\n    let names;\n\n    // allow to use strings only as event name\n    if (typeof givenNames === 'string') {\n        names = givenNames.split(splitBySpaceReg);\n    } else {\n        throw defiError('trigger:names_type', { names: givenNames });\n    }\n\n    const def = defs.get(object);\n\n    // if no definition do nothing\n    if (!def) {\n        return object;\n    }\n\n    const { events: allEvents } = def;\n\n    if (!allEvents) {\n        return object;\n    }\n\n    nofn.forEach(names, (name) => {\n        const domEvtExecResult = domEventReg.exec(name);\n\n        if (domEvtExecResult) {\n            // if EVT::KEY(SELECTOR) ia passed as event name then trigger DOM event\n            const [, eventName, key, selector] = domEvtExecResult;\n            triggerDomEvent(object, key, eventName, selector, triggerArgs);\n        } else {\n            // trigger ordinary event\n            triggerOne(object, name, triggerArgs);\n        }\n    });\n\n    return object;\n}\n","import splitBySpaceReg from '../on/_splitbyspaceregexp';\nimport checkObjectType from '../_helpers/checkobjecttype';\nimport defs from '../_core/defs';\nimport removeListener from './_removelistener';\nimport undelegateListener from './_undelegatelistener';\nimport $ from '../_mq';\n\n// removes event listener\nexport default function off(object, givenNames, callback, context) {\n    // throw error when object type is wrong\n    checkObjectType(object, 'off');\n\n    const isNamesVarArray = givenNames instanceof Array;\n    const def = defs.get(object);\n\n    // allow to pass name-handler object\n    // TODO: Name-handler object passed to off method is non-documented feature\n    if (givenNames && typeof givenNames === 'object' && !isNamesVarArray) {\n        nofn.forOwn(givenNames, (namesObjCallback, namesObjName) =>\n            off(object, namesObjName, namesObjCallback, callback));\n        return object;\n    }\n\n\n    if (!givenNames && !callback && !context) {\n        def.events = {};\n\n        nofn.forOwn(def.props, ({ bindings }, propName) => {\n            if (bindings) {\n                nofn.forEach(bindings, ({ node }) => {\n                    const eventNamespace = def.id + propName;\n                    $(node).off(`.${eventNamespace}`);\n                });\n            }\n        });\n\n        return object;\n    }\n\n    // TODO: Array of names passed to off method is non-documented feature\n    // split by spaces\n    const names = isNamesVarArray ? givenNames : givenNames.split(splitBySpaceReg);\n\n    nofn.forEach(names, (name) => {\n        const delegatedEventParts = name.split('@');\n        if (delegatedEventParts.length > 1) {\n            const [path, delegatedName] = delegatedEventParts;\n            undelegateListener(object, path, delegatedName, callback, context);\n        } else {\n            removeListener(object, name, callback, context);\n        }\n    });\n\n    return object;\n}\n","import defs from '../_core/defs';\nimport removeListener from './_removelistener';\nimport $ from '../_mq';\n\n// removes dom listener from nodes bound to given key\nexport default function removeDomListener(\n    object,\n    key,\n    eventName,\n    selector,\n    callback,\n    context,\n    info\n) {\n    const def = defs.get(object);\n\n    if (!def) {\n        return object;\n    }\n\n    const { props } = def;\n    const propDef = props[key];\n\n    if (!propDef) {\n        return object;\n    }\n\n    const { bindings } = propDef;\n\n    if (bindings) {\n        // collect bound nodes and remove DOM event listener\n        const nodes = Array(bindings.length);\n        const eventNamespace = def.id + key;\n\n        nofn.forEach(bindings, (binding, index) => {\n            nodes[index] = binding.node;\n        });\n\n        $(nodes).off(`${eventName}.${eventNamespace}`, selector, callback);\n    }\n\n    // remove bind and unbind listeners from given key\n    removeListener(object, `bind:${key}`, callback, context, info);\n    removeListener(object, `unbind:${key}`, callback, context, info);\n\n    return object;\n}\n","import undelegateListener from '../../off/_undelegatelistener';\nimport triggerOne from '../../trigger/_triggerone';\n\n// the function is called when some part of a path is changed\n// it delegates event listener for new branch of an object and undelegates it for old one\n// used for non-asterisk events\nexport default function changeHandler({\n    previousValue,\n    value\n}, {\n    path,\n    name,\n    callback,\n    context,\n    info\n} = triggerOne.latestEvent.info.delegatedData) {\n    if (value && typeof value === 'object') {\n        const delegateListener = require('./'); // fixing circular ref\n\n        delegateListener(value, path, name, callback, context, info);\n    }\n\n    if (previousValue && typeof previousValue === 'object') {\n        undelegateListener(previousValue, path, name, callback, context, info);\n    }\n}\n","// returns DOM event handler\nexport default function createDomEventHandler({\n    key,\n    object,\n    callback,\n    context\n}) {\n    return function domEventHandler(domEvent) {\n        const originalEvent = domEvent.originalEvent || domEvent;\n        // matreshkaTriggerArgs are created when DOM event is triggered by trigger method\n        const triggerArgs = originalEvent.matreshkaTriggerArgs;\n        const {\n            which, target, ctrlKey, altKey\n        } = domEvent;\n\n        if (triggerArgs) {\n            // if args are passed to trigger method then pass them to an event handler\n            callback.apply(context, triggerArgs);\n        } else {\n            // use the following object as an arg for event handler\n            callback.call(context, {\n                self: object,\n                node: this,\n                preventDefault: () => domEvent.preventDefault(),\n                stopPropagation: () => domEvent.stopPropagation(),\n                key,\n                domEvent,\n                originalEvent,\n                which,\n                target,\n                ctrlKey,\n                altKey\n            });\n        }\n    };\n}\n","// Object.assign polyfyll\n/* istanbul ignore next */\nconst assign = Object.assign || function assign(target) {\n    /* istanbul ignore next */\n    if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert variable to object');\n    }\n\n    const output = Object(target);\n\n    for (let index = 1; index < arguments.length; index++) {\n        const source = arguments[index];\n        if (source !== undefined && source !== null) {\n            nofn.forOwn(source, (nextValue, nextKey) => {\n                output[nextKey] = nextValue;\n            });\n        }\n    }\n\n    return output;\n};\n\nexport default assign;\n","import Init from './_init';\nimport data from './_data';\n\n// adds unique nodes to mq collection\nexport default function add(selector) {\n    const idMap = {};\n\n    let result;\n\n    const nodes = new Init(selector);\n\n    if (this.length) {\n        result = new Init();\n        for (let i = 0; i < this.length; i++) {\n            const node = this[i];\n            const nodeID = node.b$ = node.b$ || ++data.nodeIndex; // eslint-disable-line no-plusplus\n            idMap[nodeID] = 1;\n            result.push(node);\n        }\n\n        for (let i = 0; i < nodes.length; i++) {\n            const node = nodes[i];\n            const nodeID = node.b$ = node.b$ || ++data.nodeIndex; // eslint-disable-line no-plusplus\n            if (!idMap[nodeID]) {\n                idMap[nodeID] = 1;\n                result.push(node);\n            }\n        }\n    } else {\n        result = nodes;\n    }\n\n    return result;\n}\n","import data from './_data';\n\nconst splitBySpaceReg = /\\s+/;\nconst splitByDotReg = /\\.(.+)/;\n\n// removes event handler from a set of elements\nexport default function off(namesStr, selector, handler) {\n    if (typeof selector === 'function') {\n        handler = selector; // eslint-disable-line no-param-reassign\n        selector = null; // eslint-disable-line no-param-reassign\n    }\n\n    const names = namesStr.split(splitBySpaceReg);\n\n    for (let i = 0; i < names.length; i++) {\n        const [name, namespace] = names[i].split(splitByDotReg);\n\n        for (let j = 0; j < this.length; j++) {\n            const node = this[j];\n\n            if (!name && namespace) {\n                for (let k = 0, keys = Object.keys(data.allEvents); k < keys.length; k++) {\n                    const events = data.allEvents[keys[k]];\n\n                    for (let l = 0; l < events.length; l++) {\n                        const event = events[i];\n                        if (event.namespace === namespace && event.nodeID === node.b$) {\n                            node.removeEventListener(event.name, event.delegate || event.handler);\n                            events.splice(l, 1);\n                            l -= 1;\n                        }\n                    }\n                }\n\n                continue;\n            }\n\n            const events = data.allEvents[name + node.b$];\n            if (events) {\n                for (let k = 0; k < events.length; k++) {\n                    const event = events[k];\n                    if (\n                        (!handler || handler === event.handler || handler === event.delegate)\n                        && (!namespace || namespace === event.namespace)\n                        && (!selector || selector === event.selector)\n                    ) {\n                        node.removeEventListener(name, event.delegate || event.handler);\n                        events.splice(k, 1);\n                        k -= 1;\n                    }\n                }\n            } else if (!namespace && !selector) {\n                node.removeEventListener(name, handler);\n            }\n        }\n    }\n\n    return this;\n}\n","import data from './_data';\n\nconst splitBySpaceReg = /\\s+/;\nconst splitByDotReg = /\\.(.+)/;\nconst randomID = `${Math.random().toString().replace('0.', 'x')}y`; // x12345y\n\n// checks an element against a selector\nfunction is(node, selector) {\n    return (node.matches\n            || node.webkitMatchesSelector\n            || node.mozMatchesSelector\n            || node.msMatchesSelector\n            || node.oMatchesSelector).call(node, selector);\n}\n\n// the function is used when a selector is given\nfunction delegateHandler(evt, selector, handler) {\n    const scopeSelector = `[${randomID}=\"${randomID}\"] `;\n    const splittedSelector = selector.split(',');\n\n    let matching = '';\n\n    for (let i = 0; i < splittedSelector.length; i++) {\n        const sel = splittedSelector[i];\n        matching += `${i === 0 ? '' : ','}${scopeSelector}${sel},${scopeSelector}${sel} *`;\n    }\n\n\n    this.setAttribute(randomID, randomID);\n\n    if (is(evt.target, matching)) {\n        handler.call(this, evt);\n    }\n\n    this.removeAttribute(randomID);\n}\n\n// adds event listener to a set of elemnts\nexport default function on(namesStr, selector, handler) {\n    const names = namesStr.split(splitBySpaceReg);\n    let delegate;\n\n    if (typeof selector === 'function') {\n        handler = selector; // eslint-disable-line no-param-reassign\n        selector = null; // eslint-disable-line no-param-reassign\n    }\n\n    if (selector) {\n        delegate = function uniqueDelegateHandler(evt) {\n            delegateHandler.call(this, evt, selector, handler);\n        };\n    }\n\n    for (let i = 0; i < names.length; i++) {\n        const [name, namespace] = names[i].split(splitByDotReg);\n\n        for (let j = 0; j < this.length; j++) {\n            const node = this[j];\n            const nodeID = node.b$ = node.b$ || ++data.nodeIndex; // eslint-disable-line no-plusplus\n            const events = data.allEvents[name + nodeID] = data.allEvents[name + nodeID] || [];\n\n            let exist = false;\n\n            for (let k = 0; k < events.length; k++) {\n                const event = events[k];\n\n                if (handler === event.handler && (!selector || selector === event.selector)) {\n                    exist = true;\n                    break;\n                }\n            }\n\n            if (!exist) {\n                events.push({\n                    delegate,\n                    handler,\n                    namespace,\n                    selector,\n                    nodeID,\n                    name\n                });\n\n                node.addEventListener(name, delegate || handler, false);\n            }\n        }\n    }\n\n    return this;\n}\n","import html2nodeList from './_html2nodelist';\nimport Init from './_init';\n\n// parses given HTML and returns mq instance\nexport default function parseHTML(html) {\n    return new Init(html2nodeList(html));\n}\n","import initMK from '../_core/init';\nimport defineProp from '../_core/defineprop';\nimport addListener from './_addlistener';\nimport $ from '../_mq';\nimport createDomEventHandler from './_createdomeventhandler';\n\n// returns an object with event handlers used at addDomListener\nfunction createBindingHandlers({\n    fullEventName,\n    domEventHandler,\n    selector\n}) {\n    return {\n        bindHandler(evt = {}) {\n            const { node } = evt;\n            if (node) {\n                $(node).on(fullEventName, selector, domEventHandler);\n            }\n        },\n        unbindHandler(evt = {}) {\n            const { node } = evt;\n            if (node) {\n                $(node).off(fullEventName, selector, domEventHandler);\n            }\n        }\n    };\n}\n\n// adds DOM event listener for nodes bound to given property\nexport default function addDomListener(object, key, eventName, selector, callback, context, info) {\n    const def = initMK(object);\n    const propDef = defineProp(object, key);\n\n    const domEventHandler = createDomEventHandler({\n        key,\n        object,\n        callback,\n        context: context || object\n    });\n\n    // making possible to remove this event listener\n    domEventHandler._callback = callback;\n\n    const eventNamespace = def.id + key;\n    const fullEventName = `${eventName}.${eventNamespace}`;\n    const { bindHandler, unbindHandler } = createBindingHandlers({\n        fullEventName,\n        domEventHandler,\n        selector\n    });\n    const addBindListenerResult\n        = addListener(object, `bind:${key}`, bindHandler, context, info);\n    const addUnbindListenerResult\n        = addListener(object, `unbind:${key}`, unbindHandler, context, info);\n\n    // if events are added successfully then run bindHandler for every node immediately\n    // TODO: Describe why do we need addBindListenerResult and addUnbindListenerResult\n    if (addBindListenerResult && addUnbindListenerResult) {\n        const { bindings } = propDef;\n        if (bindings) {\n            nofn.forEach(bindings, ({ node }) => bindHandler({ node }));\n        }\n    }\n\n    return object;\n}\n","import splitBySpaceReg from './_splitbyspaceregexp';\nimport checkObjectType from '../_helpers/checkobjecttype';\nimport defiError from '../_helpers/defierror';\nimport addListener from './_addlistener';\nimport delegateListener from './_delegatelistener';\n\n// adds event listener\nexport default function on(object, givenNames, callback, triggerOnInit, context) {\n    // throw error when object type is wrong\n    checkObjectType(object, 'on');\n\n    const isNamesVarArray = givenNames instanceof Array;\n\n    // allow to pass name-handler object\n    if (givenNames && typeof givenNames === 'object' && !isNamesVarArray) {\n        nofn.forOwn(givenNames, (namesObjCallback, namesObjName) =>\n            on(object, namesObjName, namesObjCallback, callback, triggerOnInit));\n        return object;\n    }\n\n    if (typeof givenNames !== 'string' && !isNamesVarArray) {\n        throw defiError('on:names_type', { names: givenNames });\n    }\n\n    // split by spaces\n    // TODO: Array of names passed to on method is non-documented feature\n    const names = isNamesVarArray ? givenNames : givenNames.split(splitBySpaceReg);\n\n    // flip triggerOnInit and context when triggerOnInit is not boolean\n    if (typeof triggerOnInit !== 'boolean' && typeof triggerOnInit !== 'undefined') {\n        // eslint-disable-next-line no-param-reassign\n        [context, triggerOnInit] = [triggerOnInit, context];\n    }\n\n    nofn.forEach(names, (name) => {\n        const delegatedEventParts = name.split('@');\n\n        if (delegatedEventParts.length > 1) {\n            // if @ exists in event name then this is delegated event\n            const [path, delegatedName] = delegatedEventParts;\n            delegateListener(object, path, delegatedName, callback, context || object);\n        } else {\n            // if not, this is simple event\n            addListener(object, name, callback, context);\n        }\n    });\n\n    // call callback immediatelly if triggerOnInit is true\n    if (triggerOnInit === true) {\n        callback.call(context || object, { triggerOnInit });\n    }\n\n    return object;\n}\n","import on from './on';\nimport off from './off';\nimport trigger from './trigger';\nimport calc from './calc';\nimport bindNode from './bindnode';\nimport bound from './bound';\nimport unbindNode from './unbindnode';\nimport bindOptionalNode from './bindoptionalnode';\nimport set from './set';\nimport remove from './remove';\nimport mediate from './mediate';\n\n// the following methods can be used as static methods and as instance methods\nexport {\n    on,\n    off,\n    trigger,\n    calc,\n    bindNode,\n    bound,\n    unbindNode,\n    bindOptionalNode,\n    set,\n    remove,\n    mediate\n};\n","import * as functions from './_lib';\n\nmodule.exports = functions;\n"],"sourceRoot":""}